#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
#include <string.h>
#include <malloc.h>

int
sStrstr (char *s, int sn, char *p, int pn)
{
  int i = 0, j = 0;
  while ((i < sn) && (j < pn))
    {
      if (s[i] == p[j])
	{
	  i++;
	  j++;
	}
      else
	{
	  i = i - j + 1;
	  j = 0;
	}
    }
  if (j == pn)
    return (i - j);
  else
    return -1;
}

int
getNext (char *p, int pn, int next[])
{
  int j = 0;
  int k = -1;
  next[j] = k;
  while (j < pn)
    {
      if ((k == -1) || (p[k] == p[j]))
	{
	  next[++j] = ++k;
	}
      else
	{
	  k = next[k];
	}
    }
  return 0;
}

int
kStrstr (char *s, int sn, char *p, int pn)
{
  int i = 0, j = 0;
  int next[256] = { 0 };
  getNext (p, pn, next);
  while ((i < sn) && (j < pn))
    {
      if ((j == -1) || (s[i] == p[j]))
	{
	  i++;
	  j++;
	}
      else
	{
	  j = next[j];
	}
    }

  if (j == pn)
    return (i - j);
  else
    return -1;
}

void
verifyS ()
{
  char *s = "goodgoogle";
  char *p = "goog";

  int i = kStrstr (s, strlen (s), p, strlen (p));
  printf ("%s\n", (i == -1) ? "NULL" : s + i);
  return;
}


int **
threeSum (int *nums, int numsSize, int *returnSize)
{
  int i, j, k;
  int **val;

  *returnSize = 0;
  val = malloc(sizeof(int)*3*(*returnSize));
  for (i = 0; i < numsSize; i++)
    {
      for (j = i + 1; j < numsSize; j++)
	{
	  for (k = j + 1; k < numsSize; k++)
	    {
	      if (((nums[i] + nums[j] + nums[k]) == 0))
		{
		  int index = *returnSize;
		  val = realloc (val, sizeof (int) * 3 * (index + 1));
		  val[index*3][0] = i;
		  val[index*3][1] = j;
		  val[index*3][2] = k;
		  *returnSize += 1;

		}

	    }

	}

    }
  return val;
}

int verifyT()
{
    int val = 0;
    int **rt;
    int a[4] = {1,-1,0,2};
    rt = threeSum(a, 4, &val);
    printf("%d: %d %d %d\n", val, rt[0][0], rt[0][1], rt[0][2]);
    return 0;
}


int
main ()
{
  verifyT ();
  return 0;
}
